"use strict";(self["webpackChunkhahashop"]=self["webpackChunkhahashop"]||[]).push([[837],{7837:function(t,e,o){o.r(e),o.d(e,{default:function(){return D}});var r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"layoutview"}},[e("el-container",[e("el-header",{staticStyle:{height:"60px"}},[e("el-row",{staticClass:"row-bg",staticStyle:{"align-items":"center",height:"100%"},attrs:{type:"flex",justify:"space-around"}},[e("el-col",{attrs:{span:6}}),e("el-col",{staticStyle:{"text-align":"center"},attrs:{span:8}},[e("h1",[t._v("hahashop")])]),e("el-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.login()}}},[t._v("登录")])],1)],1)],1),e("el-main",t._l(t.productRows,(function(o,r){return e("el-row",{key:r,attrs:{gutter:20}},t._l(o,(function(o){return e("el-col",{key:o.goodId,attrs:{span:6}},[e("ProductCard",{attrs:{product:o},nativeOn:{click:function(e){return t.buy(o)}}})],1)})),1)})),1)],1),e("PurchaseDialog",{ref:"purchaseDialog",attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}})],1)},a=[],s=(o(4114),function(){var t=this,e=t._self._c;return e("el-card",{attrs:{"body-style":{padding:"0px"}}},[e("div",{staticClass:"image-container"},[e("img",{staticClass:"image",attrs:{src:t.product.goodImage}})]),e("div",{staticStyle:{padding:"14px","line-height":"13px"}},[e("span",[t._v(t._s(t.product.goodName))]),e("div",{staticClass:"bottom clearfix"},[e("time",{staticClass:"time"},[t._v(t._s(t.product.goodPrice))])])])])}),i=[],n={props:{product:{type:Object,required:!0}}},l=n,u=o(1656),c=(0,u.A)(l,s,i,!1,null,"00b3bc6a",null),d=c.exports,p=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:"买家信息填写",visible:this.visible,width:"30%","before-close":t.closeDialog}},[e("div",{staticStyle:{"text-align":"center"}},[t._v("商品名:"+t._s(t.product.goodName))]),e("div",{staticStyle:{"text-align":"center"}},[t._v("商品价格:"+t._s(t.product.goodPrice))]),e("div",{staticStyle:{"text-align":"center"}},[t._v("商品描述:"+t._s(t.product.goodDesc))]),e("el-form",{attrs:{model:t.form,"label-position":"right","label-width":"80px"}},[e("el-form-item",{attrs:{label:"姓名"}},[e("el-input",{model:{value:t.form.buyerName,callback:function(e){t.$set(t.form,"buyerName",e)},expression:"form.buyerName"}})],1),e("el-form-item",{attrs:{label:"手机号"}},[e("el-input",{model:{value:t.form.buyerPhone,callback:function(e){t.$set(t.form,"buyerPhone",e)},expression:"form.buyerPhone"}})],1),e("el-form-item",{attrs:{label:"交易地点"}},[e("el-input",{model:{value:t.form.buyerAddress,callback:function(e){t.$set(t.form,"buyerAddress",e)},expression:"form.buyerAddress"}})],1),e("el-form-item",{attrs:{label:"备注"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.form.buyerDesc,callback:function(e){t.$set(t.form,"buyerDesc",e)},expression:"form.buyerDesc"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){return t.closeDialog()}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.sureDialog()}}},[t._v("确 定")])],1)],1)},g=[],h=o(6551),f=o(79),m={data(){return{form:{buyerName:"",buyerPhone:"",buyerAddress:"",buyerDesc:""},product:{goodDesc:"",goodPrice:"",goodName:"",goodImage:""}}},props:{visible:{type:Boolean,required:!0}},methods:{openDialog(t){Object.assign(this.product,t),this.$emit("update:visible",!0),(0,h._P)(this.product.goodId).then((t=>{this.product.goodDesc=t.data.data.goodDesc})).catch((t=>{console.log(t)}))},closeDialog(){this.$emit("update:visible",!1)},sureDialog(){this.$emit("update:visible",!1),(0,f.HW)({...this.form,goodId:this.product.goodId}).then((t=>{console.log(t)})).catch((t=>{console.log(t)}))}}},b=m,y=(0,u.A)(b,p,g,!1,null,null,null),v=y.exports,_={components:{ProductCard:d,PurchaseDialog:v},data(){return{products:[],totalProducts:0,currentPage:1,pageSize:8,dialogVisible:!1}},methods:{fetchProducts(){(0,h.HI)({pageNum:this.currentPage,pageSize:this.pageSize}).then((t=>{console.log(t),this.products=t.data.data.goods,this.totalProducts=t.data.data.totalgoods})).catch((t=>{console.error("Error fetching products:",t)}))},handlePageChange(t){this.currentPage=t,this.fetchProducts()},login(){this.$router.push("/login")},buy(t){this.$refs.purchaseDialog.openDialog(t)}},computed:{productRows(){const t=[];for(let e=0;e<this.products.length;e+=4)t.push(this.products.slice(e,e+4));return console.log(t),t}},created(){this.fetchProducts()}},P=_,x=(0,u.A)(P,r,a,!1,null,"09a5dc8c",null),D=x.exports},79:function(t,e,o){o.d(e,{HW:function(){return a},Ii:function(){return n},WF:function(){return s},iy:function(){return i}});var r=o(5720);function a(t){return(0,r.A)({url:"/order/buy",method:"post",data:t})}function s(t){return(0,r.A)({url:"/order/list",method:"get",params:{goodId:t}})}function i(t){return(0,r.A)({url:"/order/sell",method:"post",data:t})}function n(t){return(0,r.A)({url:"/order/cancelsell",method:"post",data:t})}},6551:function(t,e,o){o.d(e,{HI:function(){return a},JH:function(){return n},OZ:function(){return l},_P:function(){return s},iJ:function(){return i}});var r=o(5720);function a(t){return(0,r.A)({url:"/good/list",params:t,method:"get"})}function s(t){return(0,r.A)({url:"/good/detail",method:"get",params:{id:t}})}function i(t){return(0,r.A)({url:"/good/update",data:t,method:"update"})}function n(t){return(0,r.A)({url:"/good/delete",data:{goodId:t},method:"delete"})}function l(t){return(0,r.A)({url:"/good/add",data:t,method:"post"})}}}]);
//# sourceMappingURL=837.9215d38c.js.map