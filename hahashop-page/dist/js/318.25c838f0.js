"use strict";(self["webpackChunkhahashop"]=self["webpackChunkhahashop"]||[]).push([[318],{4959:function(e,o,t){t.d(o,{A:function(){return n}});var i=function(){var e=this,o=e._self._c;return o("div",[e.error?o("el-result",{attrs:{title:"404",subTitle:"抱歉，请求错误"}},[o("template",{slot:"icon"},[o("el-image",{attrs:{src:"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png"}})],1)],2):e._e()],1)},l=[],r={name:"webErrorResult",props:{error:{type:Boolean,required:!0}}},s=r,d=t(1656),a=(0,d.A)(s,i,l,!1,null,null,null),n=a.exports},3318:function(e,o,t){t.r(o),t.d(o,{default:function(){return $}});var i=function(){var e=this,o=e._self._c;return o("div",{attrs:{id:"goods"}},[o("webErrorResult",{attrs:{error:e.weberror}}),o("el-skeleton",{attrs:{rows:3,animated:"",loading:e.isload}}),e.isload||e.weberror?e._e():o("el-table",{staticStyle:{width:"100"},attrs:{data:e.goods,height:e.tableConfig.height,"row-class-name":e.tableRowClassName}},[o("el-table-column",{attrs:{label:"商品图片",width:"120",fixed:""},scopedSlots:e._u([{key:"default",fn:function(e){return[o("img",{staticStyle:{width:"100px",height:"100px","object-fit":"cover","object-position":"center"},attrs:{src:e.row.goodImage}})]}}],null,!1,645573090)}),o("el-table-column",{attrs:{prop:"goodName",label:"商品名称",width:"150"}}),o("el-table-column",{attrs:{prop:"goodPrice",label:"商品价格",width:"120"}}),o("el-table-column",{attrs:{prop:"buyerNum",label:"购买者数量",width:"120"}}),o("el-table-column",{attrs:{label:"订单查看",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"primary",icon:"el-icon-view",size:"mini"},nativeOn:{click:function(o){return o.preventDefault(),e.ViewBuyers(t.row)}}})]}}],null,!1,1796306559)}),o("el-table-column",{attrs:{fixed:"right",width:"210"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{display:"flex","justify-content":"center"}},[o("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},nativeOn:{click:function(o){return o.preventDefault(),e.EditGoods(t.row)}}}),0==t.row.goodState?o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(o){return o.preventDefault(),e.DeleteGood(t.row.goodId)}}}):e._e()],1)]}}],null,!1,95234915)},[o("template",{slot:"header"},[o("div",{staticStyle:{display:"flex","justify-content":"center"}},[o("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:function(o){return e.AddGoods()}}})],1)])],2)],1),e.totalProducts>e.pageSize?o("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"prev, pager, next",total:e.totalProducts},on:{"current-change":e.handlePageChange}}):e._e(),o("GoodsEdit",{ref:"GoodsEdit",attrs:{visible:e.GoodsEditVisible},on:{"update:visible":function(o){e.GoodsEditVisible=o},updateGoods:e.GetGoods}}),o("GoodsAdd",{ref:"GoodsAdd",attrs:{visible:e.GoodsAddVisible},on:{"update:visible":function(o){e.GoodsAddVisible=o},updateGoods:e.GetGoods}}),o("BuyerView",{ref:"BuyerView",attrs:{visible:e.BuyerViewVisible},on:{"update:visible":function(o){e.BuyerViewVisible=o},updateGoods:e.GetGoods}})],1)},l=[],r=t(6551),s=function(){var e=this,o=e._self._c;return o("el-dialog",{attrs:{title:"修改商品",visible:this.visible,width:"30%","before-close":e.closeDialog}},[o("el-form",{attrs:{model:e.good,"label-position":"right","label-width":"80px"}},[o("el-form-item",{attrs:{label:"商品名称"}},[o("el-input",{model:{value:e.good.goodName,callback:function(o){e.$set(e.good,"goodName",o)},expression:"good.goodName"}})],1),o("el-form-item",{attrs:{label:"商品价格"}},[o("el-input",{model:{value:e.good.goodPrice,callback:function(o){e.$set(e.good,"goodPrice",o)},expression:"good.goodPrice"}})],1),o("el-form-item",{attrs:{label:"商品图片"}},[o("el-input",{model:{value:e.good.goodImage,callback:function(o){e.$set(e.good,"goodImage",o)},expression:"good.goodImage"}})],1),o("el-form-item",{attrs:{label:"商品备注"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.good.goodDesc,callback:function(o){e.$set(e.good,"goodDesc",o)},expression:"good.goodDesc"}})],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(o){return e.closeDialog()}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(o){return e.sureDialog()}}},[e._v("确 定")])],1)],1)},d=[],a={name:"GoodsEdit",data(){return{good:{goodName:"",goodPrice:"",goodImage:"",goodDesc:""}}},props:{visible:{type:Boolean,required:!0}},methods:{openDialog(e){Object.assign(this.good,e),this.$emit("update:visible",!0),(0,r._P)(this.good.goodId).then((e=>{this.good.goodDesc=e.data.data.goodDesc})).catch((e=>{console.log(e)}))},closeDialog(){this.$emit("update:visible",!1)},sureDialog(){this.$emit("update:visible",!1),(0,r.iJ)({goodName:this.good.goodName,goodPrice:this.good.goodPrice,goodImage:this.good.goodImage,goodDesc:this.good.goodDesc,goodId:this.good.goodId}).then((e=>{this.$emit("updateGoods"),console.log(e)})).catch((e=>{console.log(e)}))}}},n=a,u=t(1656),c=(0,u.A)(n,s,d,!1,null,null,null),g=c.exports,h=function(){var e=this,o=e._self._c;return o("el-dialog",{attrs:{title:"增加商品",visible:this.visible,width:"30%","before-close":e.closeDialog}},[o("el-form",{attrs:{model:e.good,"label-position":"right","label-width":"80px"}},[o("el-form-item",{attrs:{label:"商品名称"}},[o("el-input",{model:{value:e.good.goodName,callback:function(o){e.$set(e.good,"goodName",o)},expression:"good.goodName"}})],1),o("el-form-item",{attrs:{label:"商品价格"}},[o("el-input",{model:{value:e.good.goodPrice,callback:function(o){e.$set(e.good,"goodPrice",o)},expression:"good.goodPrice"}})],1),o("el-form-item",{attrs:{label:"商品图片"}},[o("el-input",{model:{value:e.good.goodImage,callback:function(o){e.$set(e.good,"goodImage",o)},expression:"good.goodImage"}})],1),o("el-form-item",{attrs:{label:"商品备注"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.good.goodDesc,callback:function(o){e.$set(e.good,"goodDesc",o)},expression:"good.goodDesc"}})],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(o){return e.closeDialog()}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(o){return e.sureDialog()}}},[e._v("确 定")])],1)],1)},p=[],m={name:"GoodsAdd",data(){return{good:{goodName:"",goodPrice:"",goodImage:"",goodDesc:""}}},props:{visible:{type:Boolean,required:!0}},methods:{openDialog(){this.$emit("update:visible",!0)},closeDialog(){this.$emit("update:visible",!1)},sureDialog(){this.$emit("update:visible",!1),(0,r.OZ)({goodName:this.good.goodName,goodPrice:this.good.goodPrice,goodImage:this.good.goodImage,goodDesc:this.good.goodDesc}).then((e=>{this.$emit("updateGoods"),console.log(e)})).catch((e=>{console.log(e)}))}}},f=m,b=(0,u.A)(f,h,p,!1,null,null,null),v=b.exports,w=function(){var e=this,o=e._self._c;return o("el-dialog",{attrs:{title:"订单查看",visible:this.visible,width:"50%","before-close":e.closeDialog}},[o("h3",{staticStyle:{"text-align":"center"}},[e._v(e._s(e.good.goodName))]),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.buyers,"max-height":"250","row-class-name":e.confirmedHeightlight}},[o("el-table-column",{attrs:{prop:"buyerPhone",label:"买家手机",width:"150"}}),o("el-table-column",{attrs:{prop:"buyerAddress",label:"买家地址",width:"120"}}),o("el-table-column",{attrs:{prop:"buyerDesc",label:"买家备注",width:"120"}}),o("el-table-column",{attrs:{prop:"buyerName",label:"买家姓名",width:"120"}}),o("el-table-column",{attrs:{fixed:"right",width:"210"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{display:"flex","justify-content":"center"}},[0==t.row.isConfirmed&&0==e.good.goodState?o("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"mini"},nativeOn:{click:function(o){return o.preventDefault(),e.SellGood(t.row.orderId)}}}):e._e(),1==t.row.isConfirmed&&1==e.good.goodState?o("el-button",{attrs:{type:"primary",icon:"el-icon-close",size:"mini"},nativeOn:{click:function(o){return o.preventDefault(),e.CancelSellGood(t.row.orderId)}}}):e._e()],1)]}}])})],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(o){return e.closeDialog()}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(o){return e.sureDialog()}}},[e._v("确 定")])],1)],1)},y=[],G=t(79),D={name:"BuyerView",data(){return{good:{goodId:1,goodName:"loading...",goodPrice:"loading...",goodImage:"",goodState:0},buyers:[]}},props:{visible:{type:Boolean,required:!0}},methods:{openDialog(e){Object.assign(this.good,e),this.$emit("update:visible",!0),this.GetOrders()},GetOrders(){(0,G.WF)(this.good.goodId).then((e=>{this.buyers=e.data.data.orders,this.good.goodState=e.data.data.goodState})).catch((e=>{console.log(e)}))},closeDialog(){this.$emit("update:visible",!1)},sureDialog(){this.$emit("updateGoods"),this.$emit("update:visible",!1)},confirmedHeightlight({row:e}){return e.isConfirmed?"confirmed-row":""},SellGood(e){const o=this.good.goodId;(0,G.iy)({orderId:e,goodId:o}).then((e=>{this.GetOrders(),console.log(e)})).catch((e=>{console.log(e)}))},CancelSellGood(e){const o=this.good.goodId;(0,G.Ii)({orderId:e,goodId:o}).then((e=>{this.GetOrders(),console.log(e)})).catch((e=>{console.log(e)}))}}},I=D,k=(0,u.A)(I,w,y,!1,null,null,null),_=k.exports,x=t(4959),A={name:"GoodsView",methods:{handlePageChange(e){this.currentPage=e,this.GetGoods()},deleteGood(e){(0,r.JH)(e).then((e=>{this.GetGoods(),console.log(e)})).catch((e=>{console.log(e)}))},GetGoods(){this.isload=!0,(0,r.HI)({pageNum:this.currentPage,pageSize:this.pageSize}).then((e=>{this.goods=e.data.data.goods,this.totalProducts=e.data.data.totalGoods,this.isload=!1,this.weberror=!1})).catch((e=>{this.isload=!1,this.weberror=!0,console.log(e)}))},EditGoods(e){this.$refs.GoodsEdit.openDialog(e)},AddGoods(){this.$refs.GoodsAdd.openDialog()},ViewBuyers(e){this.$refs.BuyerView.openDialog(e)},getHeight(){this.tableConfig.height=window.innerHeight-100},tableRowClassName({row:e}){return 1==e.goodState?"warning-row":""}},components:{GoodsEdit:g,GoodsAdd:v,BuyerView:_,webErrorResult:x.A},data(){return{goods:[],GoodsEditVisible:!1,GoodsAddVisible:!1,BuyerViewVisible:!1,currentPage:1,pageSize:8,totalProducts:0,tableConfig:{height:200},isload:!0,weberror:!1}},created(){this.GetGoods(),this.getHeight(),window.addEventListener("resize",this.getHeight)},destroyed(){window.removeEventListener("resize",this.getHeight)}},P=A,S=(0,u.A)(P,i,l,!1,null,"6e699327",null),$=S.exports},79:function(e,o,t){t.d(o,{HW:function(){return l},Ii:function(){return d},WF:function(){return r},iy:function(){return s}});var i=t(5720);function l(e){return(0,i.A)({url:"/order/buy",method:"post",data:e})}function r(e){return(0,i.A)({url:"/order/list",method:"get",params:{goodId:e}})}function s(e){return(0,i.A)({url:"/order/sell",method:"post",data:e})}function d(e){return(0,i.A)({url:"/order/cancelsell",method:"post",data:e})}},6551:function(e,o,t){t.d(o,{HI:function(){return l},JH:function(){return d},OZ:function(){return a},_P:function(){return r},iJ:function(){return s}});var i=t(5720);function l(e){return(0,i.A)({url:"/good/list",params:e,method:"get"})}function r(e){return(0,i.A)({url:"/good/detail",method:"get",params:{id:e}})}function s(e){return(0,i.A)({url:"/good/update",data:e,method:"update"})}function d(e){return(0,i.A)({url:"/good/delete",data:{goodId:e},method:"delete"})}function a(e){return(0,i.A)({url:"/good/add",data:e,method:"post"})}}}]);
//# sourceMappingURL=318.25c838f0.js.map