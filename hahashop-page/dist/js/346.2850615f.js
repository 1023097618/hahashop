"use strict";(self["webpackChunkhahashop"]=self["webpackChunkhahashop"]||[]).push([[346],{4959:function(e,t,i){i.d(t,{A:function(){return h}});var r=function(){var e=this,t=e._self._c;return t("div",[e.error?t("el-result",{attrs:{title:"404",subTitle:"抱歉，请求错误"}},[t("template",{slot:"icon"},[t("el-image",{attrs:{src:"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png"}})],1)],2):e._e()],1)},o=[],s={name:"webErrorResult",props:{error:{type:Boolean,required:!0}}},a=s,l=i(1656),n=(0,l.A)(a,r,o,!1,null,null,null),h=n.exports},3346:function(e,t,i){i.r(t),i.d(t,{default:function(){return g}});var r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"history"}},[t("el-skeleton",{attrs:{rows:3,animated:"",loading:e.isload}}),t("webErrorResult",{attrs:{error:e.weberror}}),e.isload||e.weberror?e._e():t("el-table",{staticStyle:{width:"100"},attrs:{data:e.histories,height:e.tableConfig.height}},[t("el-table-column",{attrs:{prop:"goodId",label:"商品id",width:"120",fixed:""}}),t("el-table-column",{attrs:{label:"商品图片",width:"120"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("img",{staticStyle:{width:"100px",height:"100px","object-fit":"cover","object-position":"center"},attrs:{src:e.row.goodImage}})]}}],null,!1,645573090)}),t("el-table-column",{attrs:{prop:"goodName",label:"商品名称",width:"150"}}),t("el-table-column",{attrs:{prop:"goodPrice",label:"商品价格",width:"120"}}),t("el-table-column",{attrs:{prop:"goodDesc",label:"商品描述",width:"120"}}),t("el-table-column",{attrs:{prop:"operationTime",label:"操作时间",width:"120"}}),t("el-table-column",{attrs:{fixed:"right",width:"210"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",{staticStyle:{display:"flex","justify-content":"center"}},[t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},nativeOn:{click:function(t){return t.preventDefault(),e.DeleteHistories(i.row.historyId)}}})],1)]}}],null,!1,2624834415)})],1),e.totalHistories>e.pageSize?t("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"prev, pager, next",total:e.totalHistories},on:{"current-change":e.handlePageChange}}):e._e()],1)},o=[],s=i(5720);function a(e){return(0,s.A)({url:"/history/list",params:e,method:"get"})}function l(e){return(0,s.A)({url:"/history/delete",data:{historyId:e},method:"delete"})}var n=i(4959),h={name:"HistoriesView",methods:{handlePageChange(e){this.currentPage=e,this.GetHistories()},DeleteHistories(e){l(e).then((e=>{this.GetHistories(),console.log(e)})).catch((e=>{console.log(e)}))},GetHistories(){this.isload=!0,a({pageNum:this.currentPage,pageSize:this.pageSize}).then((e=>{this.histories=e.data.data.histories,this.totalHistories=e.data.data.totalHistories,this.isload=!1,this.weberror=!1})).catch((e=>{this.isload=!1,this.weberror=!0,console.log(e)}))},getHeight(){this.tableConfig.height=window.innerHeight-100}},data(){return{histories:[],currentPage:1,pageSize:8,totalHistories:0,tableConfig:{height:200},isload:!0,weberror:!1}},created(){this.GetHistories(),this.getHeight(),window.addEventListener("resize",this.getHeight)},destroyed(){window.removeEventListener("resize",this.getHeight)},components:{webErrorResult:n.A}},d=h,u=i(1656),c=(0,u.A)(d,r,o,!1,null,null,null),g=c.exports}}]);
//# sourceMappingURL=346.2850615f.js.map