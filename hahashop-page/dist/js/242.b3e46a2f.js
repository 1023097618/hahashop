"use strict";(self["webpackChunkhahashop"]=self["webpackChunkhahashop"]||[]).push([[242],{4959:function(t,e,o){o.d(e,{A:function(){return c}});var r=function(){var t=this,e=t._self._c;return e("div",[t.error?e("el-result",{attrs:{title:"404",subTitle:"抱歉，请求错误"}},[e("template",{slot:"icon"},[e("el-image",{attrs:{src:"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png"}})],1)],2):t._e()],1)},a=[],i={name:"webErrorResult",props:{error:{type:Boolean,required:!0}}},s=i,l=o(1656),n=(0,l.A)(s,r,a,!1,null,null,null),c=n.exports},7242:function(t,e,o){o.r(e),o.d(e,{default:function(){return w}});var r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"layoutview"}},[e("el-container",[e("el-header",{staticStyle:{height:"60px"}},[e("el-row",{staticClass:"row-bg",staticStyle:{"align-items":"center",height:"100%"},attrs:{type:"flex",justify:"space-around"}},[e("el-col",{attrs:{span:6}}),e("el-col",{staticStyle:{"text-align":"center"},attrs:{span:8}},[e("h1",[t._v("hahashop")])]),e("el-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.login()}}},[t._v("登录")])],1)],1)],1),e("el-main",[e("el-skeleton",{attrs:{rows:3,animated:"",loading:t.isload}}),e("webErrorResult",{attrs:{error:t.weberror}}),t.isload||t.weberror?t._e():e("div",[t._l(t.productRows,(function(o,r){return e("el-row",{key:r,attrs:{gutter:20}},t._l(o,(function(o){return e("el-col",{key:o.goodId,attrs:{span:6}},[e("ProductCard",{attrs:{product:o},nativeOn:{click:function(e){return t.buy(o)}}})],1)})),1)})),t.totalProducts>t.pageSize?e("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"prev, pager, next",total:t.totalProducts},on:{"current-change":t.handlePageChange}}):t._e()],2)],1)],1),e("PurchaseDialog",{ref:"purchaseDialog",attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}})],1)},a=[],i=(o(4114),function(){var t=this,e=t._self._c;return e("el-card",{class:{frozen:1===t.product.goodState,active:0===t.product.goodState,clicked:t.clicked},attrs:{"body-style":{padding:"0px"}}},[e("div",{staticClass:"image-container",on:{click:t.handleClick}},[e("img",{staticClass:"image",attrs:{src:t.product.goodImage}})]),e("div",{staticStyle:{padding:"14px","line-height":"13px"},on:{click:t.handleClick}},[e("span",[t._v(t._s(t.product.goodName))]),e("div",{staticClass:"bottom clearfix"},[e("time",{staticClass:"time"},[t._v(t._s(t.product.goodPrice))])])])])}),s=[],l={props:{product:{type:Object,required:!0}},data(){return{clicked:!1}},methods:{handleClick(){0===this.product.goodState&&(this.clicked=!0,setTimeout((()=>{this.clicked=!1}),500))}}},n=l,c=o(1656),u=(0,c.A)(n,i,s,!1,null,"922de654",null),d=u.exports,p=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:"买家信息填写",visible:this.visible,width:"30%","before-close":t.closeDialog}},[e("div",{staticStyle:{"text-align":"center"}},[t._v("商品名:"+t._s(t.product.goodName))]),e("div",{staticStyle:{"text-align":"center"}},[t._v("商品价格:"+t._s(t.product.goodPrice))]),e("div",{staticStyle:{"text-align":"center"}},[t._v("商品描述:"+t._s(t.product.goodDesc))]),e("el-form",{attrs:{model:t.form,"label-position":"right","label-width":"80px"}},[e("el-form-item",{attrs:{label:"姓名"}},[e("el-input",{model:{value:t.form.buyerName,callback:function(e){t.$set(t.form,"buyerName",e)},expression:"form.buyerName"}})],1),e("el-form-item",{attrs:{label:"手机号"}},[e("el-input",{model:{value:t.form.buyerPhone,callback:function(e){t.$set(t.form,"buyerPhone",e)},expression:"form.buyerPhone"}})],1),e("el-form-item",{attrs:{label:"交易地点"}},[e("el-input",{model:{value:t.form.buyerAddress,callback:function(e){t.$set(t.form,"buyerAddress",e)},expression:"form.buyerAddress"}})],1),e("el-form-item",{attrs:{label:"备注"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.form.buyerDesc,callback:function(e){t.$set(t.form,"buyerDesc",e)},expression:"form.buyerDesc"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){return t.closeDialog()}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.sureDialog()}}},[t._v("确 定")])],1)],1)},g=[],h=o(6551),f=o(79),m={data(){return{form:{buyerName:"",buyerPhone:"",buyerAddress:"",buyerDesc:""},product:{goodDesc:"",goodPrice:"",goodName:"",goodImage:""}}},props:{visible:{type:Boolean,required:!0}},methods:{openDialog(t){Object.assign(this.product,t),this.$emit("update:visible",!0),(0,h._P)(this.product.goodId).then((t=>{this.product.goodDesc=t.data.data.goodDesc})).catch((t=>{console.log(t)}))},closeDialog(){this.$emit("update:visible",!1)},sureDialog(){this.$emit("update:visible",!1),(0,f.HW)({...this.form,goodId:this.product.goodId}).then((t=>{console.log(t)})).catch((t=>{console.log(t)}))}}},b=m,y=(0,c.A)(b,p,g,!1,null,null,null),v=y.exports,_=o(4959),P={components:{ProductCard:d,PurchaseDialog:v,webErrorResult:_.A},data(){return{products:[],totalProducts:0,currentPage:1,pageSize:8,dialogVisible:!1,isload:!0,weberror:!1}},methods:{fetchProducts(){this.isload=!0,(0,h.HI)({pageNum:this.currentPage,pageSize:this.pageSize}).then((t=>{console.log(t),this.products=t.data.data.goods,this.totalProducts=t.data.data.totalGoods,this.isload=!1,this.weberror=!1})).catch((t=>{this.isload=!1,this.weberror=!0,console.error("Error fetching products:",t)}))},handlePageChange(t){this.currentPage=t,this.fetchProducts()},login(){this.$router.push("/login")},buy(t){0===t.goodState&&this.$refs.purchaseDialog.openDialog(t)}},computed:{productRows(){const t=[];for(let e=0;e<this.products.length;e+=4)t.push(this.products.slice(e,e+4));return console.log(t),t}},created(){this.fetchProducts()}},k=P,x=(0,c.A)(k,r,a,!1,null,"cccb816a",null),w=x.exports},79:function(t,e,o){o.d(e,{HW:function(){return a},Ii:function(){return l},WF:function(){return i},iy:function(){return s}});var r=o(5720);function a(t){return(0,r.A)({url:"/order/buy",method:"post",data:t})}function i(t){return(0,r.A)({url:"/order/list",method:"get",params:{goodId:t}})}function s(t){return(0,r.A)({url:"/order/sell",method:"post",data:t})}function l(t){return(0,r.A)({url:"/order/cancelsell",method:"post",data:t})}},6551:function(t,e,o){o.d(e,{HI:function(){return a},JH:function(){return l},OZ:function(){return n},_P:function(){return i},iJ:function(){return s}});var r=o(5720);function a(t){return(0,r.A)({url:"/good/list",params:t,method:"get"})}function i(t){return(0,r.A)({url:"/good/detail",method:"get",params:{id:t}})}function s(t){return(0,r.A)({url:"/good/update",data:t,method:"update"})}function l(t){return(0,r.A)({url:"/good/delete",data:{goodId:t},method:"delete"})}function n(t){return(0,r.A)({url:"/good/add",data:t,method:"post"})}}}]);
//# sourceMappingURL=242.b3e46a2f.js.map