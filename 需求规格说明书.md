## [一、业务需求](#o)
### [1.1商品管理](#oo)
### [1.2用户信息管理](#ot)
### [1.3交易管理](#0th)
### [1.4卖家后台管理](#of)
### [1.5业务流程图](#ofi)
## [二、用户需求](#t)
### [2.1用户角色](#to)
### [2.2用户故事](#tt)
### [2.3功能需求](#tth)
### [2.4用例描述](#tf)
## [三、技术需求](#th)
### [3.1数据库设计](#tho)
### [3.2数据规范](#tht)
### [3.3系统安全](#thth)

<h2 id="o">一、业务需求</h2>

<h3 id="oo">1.1商品管理</h3>

- **商品发布**：卖家通过后台发布单个商品，包括商品名称、商品描述、商品图片、商品价格

- **商品查看**：用户浏览商品信息，包括名称、描述、图片、价格。

- **商品购买**：用户选择购买商品时，需填写用户信息（姓名、联系方式、地址、备注），进行线下交易。

- **商品状态管理**：

（1）**上架**：新发布的商品自动设为可购买状态。

（2）**冻结**：当有用户表达购买意向并卖家已选择意向购买人，商品状态转为冻结，不再支持提交购买意向。

（3）**下架**：交易成功后，商品从列表中移除。

（4）**恢复上架**：若交易失败，商品状态恢复为可购买。

<h3 id="ot">1.2用户信息管理</h3>

- **信息填写**：用户在购买商品时填写必要信息，包括姓名、联系电话、地址以及备注。

- **信息安全**：确保用户信息的安全存储，不泄露给未经授权的第三方。

<h3 id="oth">1.3交易管理</h3>

- **线下交易确认**：卖家选定意向购买人之后，通过后台标记商品为冻结状态。

- **交易结果更新**：交易完成后，卖家通过后台更新商品状态为下架；若交易失败，恢复上架。

<h3 id="of">1.4卖家后台管理</h3>

- **商品发布与编辑**：卖家可以发布新商品，或修改现有商品的信息（名称、描述、图片、价格）。

- **历史商品查看**：卖家可以查看所有发布过的商品记录，包括已下架的商品。

- **意向购买人查看**：卖家可以查看表达购买意向的用户信息，以便进行线下交易沟通。

- **选择意向购买人**：卖家可以在意向购买人列表中选择购买人进行线下交易。

- **商品冻结/解冻**：根据交易状态手动管理商品的冻结和恢复上架。

- **密码管理**：卖家可以修改自己的登录密码。

<h3 id="ofi">1.5业务流程图</h3>


<h2 id="t">二、用户需求</h2>

<h3 id="to">2.1用户角色</h3>

- **卖家**：唯一卖家，负责商品状态管理以及交易管理。

- **买家**：无需注册，浏览商品并填写个人信息进行购买。

<h3 id="tt">2.2用户故事</h3>

用户故事1：作为卖家，我想要发布一个新的商品，以便让用户能够查看并购买该商品。

用户故事2：作为卖家，我想要查看确定意向购买人来线下交易并更新商品状态，以便管理商品的的销售流程。

用户故事3：作为卖家，我想要查看历史商品记录和意向购买人信息，以便分析销售情况和跟进潜在买家。

用户故事4：作为卖家，我想要修改后台管理系统的登录密码，以确保账户安全。

用户故事5：作为买家，我想要查看商品信息并提交购买意向，以便购买我感兴趣的商品。

<h3 id="tth">2.3功能需求</h3>

![业务流程图](https://gitee.com/zhishidiannaoka/hahashop/raw/master/2235020429-%E9%A2%9D%E5%A4%96%E6%88%90%E6%9E%9C%E7%89%A9/1-images/%E4%B8%9A%E5%8A%A1%E6%B5%81%E7%A8%8B%E5%9B%BE.png)

#### 2.3.1 卖家功能

**管理商品：**

- 发布商品：输入商品名称、描述、图片及价格并发布。

- 查看历史商品：查看过去发布过的商品记录。

- 冻结商品：在卖家确认意向购买人后，将商品状态设为冻结。

- 撤下商品：成功交易后，将撤下商品；失败交易后，将恢复商品为可售状态。

**管理订单：**

- 查看意向购买人信息：查看买家提交的个人信息。

- 选择购买人：查看意向购买人信息后，选择购买人进行交易。

**管理账户：**

- 登录系统：商家登录系统进行一系列操作。

- 修改密码：商家首次登录后，修改密码。

#### 2.3.2买家功能

- 查看商品信息：查看展示的商品名称、描述、价格和图片。

- 填写用户信息：在决定购买时，填写姓名、电话、地址等个人信息。

<h3 id="tf">2.4用例描述</h3>

#### 2.4.1用例清单
| 用例编号 | 用例名称 | 用例描述 | 前置条件 | 后置条件 | 主要步骤 |
|---|---|---|---|---|---|
| S001 | 登录后台系统 | 卖家登录后台系统，进行商品管理以及订单管理等操作。| 卖家已打开网站并入登录界面 | 卖家成功登录系统| i、卖家打开网站。<br/>ii、系统显示登录页面。<br/>iii、卖家输入账户名和密码进行登录。<br/>iv、系统验证账户信息。 |
| S002 | 修改密码 | 卖家通过后台系统修改自己的登录密码。| 卖家已登录后台系统 | 卖家的登录密码被成功修改并重新登录 | i、卖家登录后台系统。<br/>ii、进入账户设置页面进行修改密码。<br/>iii、输入当前密码和新密码。<br/>iv、提交修改请求。<br/>v、系统跳转到登录界面。<br/>vi、卖家输入用户名和新密码成功登录系统。|
| S003 | 发布商品 | 卖家通过后台系统发布一个新的商品。发布过程中，卖家需要填写商品的详细信息，包括商品名称、描述、图片和价格。| 卖家已登录后台系统当前无正在售卖的商品 | 商品信息被成功保存到系统中，并展示给买家看。 | i、卖家登录后台系统。<br/>ii、导航到“发布商品”页面。<br/>iii、填写商品名称、描述、上传商品图片和价格。<br/>iv、提交商品信息。<br/>v、系统验证信息完整性并保存。<br/>vi、商品被成功发布并展示在页面上。|
| S004 | 查看历史商品 | 卖家通过后台系统看到历史商品信息 | 卖家已登录后台系统 | 页面展示出历史商品列表 | i、卖家登录后台系统。<br/>ii、导航到“历史商品”查看界面<br/>iii、系统展示历史商品列表。 |
| S005 | 冻结商品 | 卖家选定意向购买人进行线下交易，商品呈现冻结状态 | 已有买家提交意向购买信息 | 商品被成功冻结 | i、卖家查看意向购买人列表。<br/>ii、卖家选择意向购买人。<br/>iii、商品呈现冻结转台。|
| S006 | 撤下商品 | 当交易成功后，卖家撤下商品；当交易失败，卖家回复商品状态 | 卖家已选择意向购买人 | 商品被撤下或恢复 | i、卖家选择意向购买人<br/>ii、卖家买家进行线下交易<br/>iii、交易成功，卖家撤下商品；交易失败，卖家回复商品 |
| S007 | 查看意向购买人信息 | 卖家通过后台系统查看意向购买人的信息，以便进行线下交易。| 卖家已经登录后台系统并有买家提交了购买意向。| 卖家能够查看意向购买人的信息。| i、卖家登录后台系统。<br/>ii、导航到查看意向购买人页面。<br/>iii、查看意向购买人的信息列表。<br/>iv、点击具体意向购买人的信息，可查看详细信息。|
| S008 | 选择意向购买人 | 卖家通过后台查看意向购买人的信息后，选择意向购买人以便进行线下交易。| 卖家已查看到意向购买人的信息。| 卖家成功选择意向购买人并进行线下交易。|i、卖家查看意向购买人信息。<br/>ii、选择其中心仪的买家。|
| B001 | 查看商品信息 | 买家通过页面查看商品的详细信息，包括商品名称、描述、图片和价格。| 买家已访问网站并浏览到商品页面。| 买家能够查看到商品的详细信息。| i、买家访问网站。<br/>ii、导航到商品页面。<br/>iii、查看商品的详细信息。|
| B002 | 填写用户信息 | 买家有购买意向时，填写用户信息包括姓名、电话、地址等信息并提交 | 买家有意向购买商品 | 用户信息提交成功 | i、买家浏览商品并有购买意向。<br/>ii、买家填写用户信息并提交。<br/>iii、系统验证用户信息有效性。<br/>iv、用户信息提交成功。 |

#### 2.4.2用例图

![用例图](https://gitee.com/zhishidiannaoka/hahashop/raw/master/2235020429-%E9%A2%9D%E5%A4%96%E6%88%90%E6%9E%9C%E7%89%A9/1-images/%E7%94%A8%E4%BE%8B%E5%9B%BE.png)

<h2 id="th">三、技术需求</h2>

<h3 id="tho">3.1数据库设计</h3>

**商品表**（Good）：

- 商品ID(goodId,Primary key,自动生成)

- 商品名称(goodName,TEXT,不可空)

- 商品描述(goodDesc,TEXT)

- 商品图片（goodImage,TEXT,存储图片链接）

- 商品价格（goodPrice,INTEGER,不可为空）

- 商品状态（goodState,INTEGER，1为上架，0为下架）

- 买家数量（buyerNum,INTEGER,表示当前提交购买意向的人数）

**用户信息表**（User）

- 用户ID（id,Primary Key,自动生成）

- 用户名（username,TEXT,不为空）

- 密码（password,TEXT,存储加密后的密码）

- 用户权限（privilege,INTEGER,检验用户）

**订单表**（Oders）

- 订单ID（orderId,Primary Key，自动生成）

- 商品ID（goodId,商品表的外键）

- 买家姓名（buyerName,TEXT,不为空）

- 买家地址（buyerAddress,TEXT,不为空）

- 买家电话（buyerPhone,TEXT,不为空）

- 买家备注（buyerDesc,TEXT）

- 是否确认（isConfirmed,BOOLEAN,1表示被选中，0表示未被选中）

**历史商品表**：（History）

- 历史商品ID（historyId，Primary Key,自动生成）

- 商品ID（goodId,INTEGER,商品表的外键）

- 商品名称（goodName,TEXT）

- 商品描述（goodDesc,TEXT）

- 商品价格（goodPrice,INTEGER）

- 商品图片（goodImage，TEXT）

- 上传时间（operationtime,TEXT,描述商品上架时间）

<h3 id="tht">3.2数据规范</h3>

- 商品名称：长度不超过255个字符，支持中英文及特殊字符，但需避免SQL注入风险。

- 商品描述：无长度限制，支持HTML格式以展示丰富内容，但需过滤掉潜在的安全代码。

- 商品图片：图片应上传至服务器并存储其URL链接，支持常见图片格式（JPEG, PNG等），图片大小不超过5MB。

- 商品价格：格式为数字，保留两位小数，支持正数表示价格。

- 用户名：长度在5-20个字符之间，支持中英文及数字，唯一性校验，避免SQL注入。

- 用户密码：采用强密码策略（至少8位，包含大小写字母、数字和特殊字符），并且加密存储。

- 用户号码：是11位有效号码，同一个买家在购买不同的商品时填写的号码应该保持一致。

- 用户地址：包含包含省、市、区（县）、街道（乡镇）及具体的门牌号或小区名称、楼栋号、单元号等信息。避免使用模糊或产生歧义的词汇，如“附近”“旁边”等。

<h3 id="thth">3.3系统安全</h3>

- 输入验证：对所有用户输入进行严格的验证和过滤，防止SQL注入、XSS攻击等。

- 数据加密：敏感信息（如用户密码）使用强加密算法存储。

- 权限控制：确保只有卖家可以访问后台管理功能，普通用户仅可查看商品信息和提交购买意向。








