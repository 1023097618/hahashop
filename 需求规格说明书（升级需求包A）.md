
<h2 id="o">一、业务需求</h2>

<h3 id="oo">1.1商品管理</h3>

<h4 id="ooo">1.1.1批量商品发布功能</h4>

- 系统需支持管理员或商家一次性发布多个商品，以提高商品上架效率。

- 发布过程中应包含商品的基本信息（如名称、价格、类别等）和图片、描述等详细内容。

<h4 id="oot">1.1.2二级类别管理</h4>

- 商品分类系统需支持二级类别管理，即每个主类别下可设置多个子类别。

- 商家在发布商品时，需能够选择正确的二级类别进行归类。

<h4 id="ooth">1.1.3库存管理与自动下架</h4>

- 系统需为每个商品设置库存数量，并实时监控库存变化。

- 当某商品的库存数量降至0时，系统应自动将该商品从销售列表中下架，避免超卖情况发生。

<h4 id="oof">1.1.4商品查找方式</h4>

- 用户应能够通过浏览和搜索两种方式查找商品。

- 浏览方式通过商品列表的展示；搜索方式应支持关键词搜索，并能根据搜索结果进行排序和筛选。

<h4 id="oofi">1.1.5商品图片与描述</h4>

- 商品发布时，应支持上传多张商品图片，以全方位展示商品。

- 商品描述应支持富媒体格式（如文本、图片、视频等），以提供更丰富的商品信息。

<h3 id="ot">1.2客户管理</h3>

<h4 id="oto">1.2.1客户自由注册</h4>

- 系统应允许客户自由注册账号，注册信息包括用户名、密码、电话和默认交易地点等。

- 注册过程中应进行必要的验证，确保用户信息的真实性和安全性。

<h4 id="ott">1.2.2历史下单记录查看</h4>

- 客户登录后，应能够查看自己的历史下单记录，包括订单详情、支付状态、交易进度等。

<h4 id="otth">1.2.3商家查看客户信息</h4>

- 商家应能够查看所有注册的客户信息，包括基本信息和购买历史等。

<h4 id="otf">1.2.4卖家后台管理</h4>

- 卖家使用初始账户和密码登录商品后台系统。

- 卖家登录后台商品后可以自主修改密码。

- 卖家可以查看历史发布商品。

<h3 id="oth">1.3业务流程图</h3>

![业务流程图](https://gitee.com/zhishidiannaoka/hahashop/raw/master/2235020429-%E9%A2%9D%E5%A4%96%E6%88%90%E6%9E%9C%E7%89%A9/2-images/%E4%B8%9A%E5%8A%A1%E6%B5%81%E7%A8%8B%E5%9B%BE.png)

<h2 id="t">二、用户需求</h2>

<h3 id="to">2.1用户角色</h3>

**唯一卖家**

（1）职责

- 在平台上发布和管理自己的商品，包括设置价格、库存、类别、图片和描述等。

- 查看和管理自己的订单，处理客户的购买请求和售后问题。

- 查看和分析客户的购买历史，进行客户管理和营销活动。

（2）相关功能

- 登录商品后台系统，修改密码功能。

- 商品管理中的所有功能。

- 客户管理中的“商家查看所有注册的客户信息，以及他们的购买历史”功能。

- 查看历史商品信息功能。

**普通买家**

（1）职责

- 在平台上浏览和搜索商品，选择心仪的商品进行购买。

- 查看自己的订单历史，包括已完成的订单和正在处理的订单。

（2）相关功能

- 能够通过浏览和搜索两种方式来查找商品。

- 可以自由注册平台。登录后可以查看自己的历史下单记录。

<h3 id="tt">2.2用户故事</h3>

1. **用户故事1**：卖家可以同时发布多个商品

- **角色**：卖家

- **故事**：作为卖家，我希望能够一次性发布多个商品，而不是逐一添加，以提高我的工作效率。

- **接受标准**：在商品发布页面，应提供一个批量上传或添加商品的功能，允许我同时输入多个商品的详细信息，并一次性发布到平台上。

2. **用户故事2**：卖家管理2级商品类别

- **角色**：卖家

- **故事**：我希望能够对商品进行2级类别的管理，以便更好地组织我的商品，让买家更容易找到他们想要的商品。

- **接受标准**：在商品管理后台，应提供创建、编辑和删除商品类别的功能，支持2级类别结构，我可以为每个商品分配一个合适的类别。

3. **用户故事3**：商品自动下架当库存为0

- **角色**：系统（自动化）

- **故事**：当商品的库存数量减少到0时，我希望系统能够自动将该商品下架，以避免无货可卖的情况。

- **接受标准**：系统应实时监控商品的库存数量，当库存为0时，自动将商品从销售列表中移除，并标记为已下架状态。

4. **用户故事4**：买家浏览和搜索商品

- **角色**：买家

- **故事**：我希望能够通过浏览和搜索两种方式找到我想购买的商品。

- **接受标准**：平台应提供清晰的商品分类导航，允许买家通过浏览方式查找商品；同时，应提供强大的搜索功能，支持关键词搜索，帮助我快速找到目标商品。

5. **用户故事5**：卖家上传多张商品图片和富媒体描述

- **角色**：卖家

- **故事**：我希望能够上传多张商品图片，并提供富媒体格式的商品描述，以吸引更多买家的注意并且让买家更全面的了解我的商品。

- **接受标准**：在商品发布页面，应提供上传多张图片的功能，并允许我使用文字、图片、视频等富媒体格式详细描述商品的特点和优势。

6. **用户故事6**：买家自由注册账号

- **角色**：买家

- **故事**：我希望能够自由注册一个账号，以便享受平台提供的各项服务。

- **接受标准**：平台应提供简洁明了的注册页面，允许我输入用户名、密码、电话和默认交易地点等信息进行注册；注册成功后，应能够登录账号并使用各项功能。

7. **用户故事7**：买家查看历史下单记录

- **角色**：买家

- **故事**：我希望能够登录账号后查看我的历史下单记录，以便了解我的购买历史和订单状态。

- **接受标准**：：在买家个人中心页面，应提供查看历史下单记录的功能，展示所有已完成的订单和正在处理的订单详情；同时，应提供订单状态的实时更新功能，让买家随时了解订单的最新进展。

8. **用户故事8**：卖家查看客户信息及购买历史

- **角色**：卖家

- **故事**：我希望能够查看所有注册的客户信息以及他们的购买历史，以便更好地了解我的客户群体并进行精准营销。

- **接受标准**：在卖家后台管理系统中，应提供查看客户信息及购买历史的功能，展示客户的用户名、电话、交易地点等基本信息以及购买商品的记录。

9. **用户故事9**：卖家登录商家后台系统

- **角色**：卖家

- **故事**：我希望能够登录卖家后台系统，以便进行后续商品的交易等所有功能。

- **接受标准**：平台应提供简明了解的登录页面，允许我输入用户名和初始密码信息进项登录；登录之后，应该能够登录账号并使用各项功能。

10. **用户故事10**：卖家修改密码

- **角色**：卖家

- **故事**：我希望在使用初始化密码登录之后，能够修改成我自己设置的密码，加强我的账户安全。

- **接受标准**：平台应该在卖家后台系统中明了地提供修改密码界面，在我修改密码之后，能够用用户名和新密码登录卖家后台系统。



<h3 id="tth">2.3用例详情</h3>

| 用例编号 | 用例名称 | 用例描述 | 前置条件 | 后置条件 | 主要步骤 | 
|---|---|---|---|---|---|
| S001 | 登录后台系统 | 卖家登录后台系统，进行商品管理以及订单管理等操作。| 卖家已打开网站并入登录界面 | 卖家成功登录系统| 1.卖家打开网站。<br/>2.系统显示登录页面。<br/>3.卖家输入账户名和密码进行登录。<br/>4.系统验证账户信息。 |
| S002 | 修改密码 | 卖家通过后台系统修改自己的登录密码。| 卖家已登录后台系统 | 卖家的登录密码被成功修改并重新登录 | 1.卖家登录后台系统。<br/>2.进入账户设置页面进行修改密码。<br/>3.输入当前密码和新密码。<br/>4.提交修改请求。<br/>5.系统跳转到登录界面。<br/>6.卖家输入用户名和新密码成功登录系统。|
| S003| 发布商品 | 卖家可以同时发布多个商品 | 卖家已登录到卖家后台系统，具备发布商品的权限。| 发布的商品已成功添加到平台商品列表中，且状态为可销售。| 1.卖家在卖家后台选择“发布商品”功能。<br/>2.在发布商品页面，选择“批量发布”选项。<br/>3.上传包含多个商品信息的文件（如Excel文件），或填写多个商品的详细信息。<br/>4.确认商品信息无误后，点击发布。<br/>5.系统检测商品是否正确，正确便显示发布商品的列表<br/>6.卖家检查商品列表，确认所有商品已成功发布。|
| S004 | 查看历史商品 | 卖家通过后台系统看到历史商品信息 | 卖家已登录后台系统 | 页面展示出历史商品列表 | i、卖家登录后台系统。<br/>ii、导航到“历史商品”查看界面<br/>iii、系统展示历史商品列表。 |
| S010|管理商品2级类别|卖家在发布商品前，应该准确将商品分类|卖家已登录到卖家后台，具备管理商品类别的权限。|商品类别已成功创建或修改，且商品已成功分配到相应的类别中。|1.卖家在卖家后台选择“商品类别管理”功能。<br/>2.创建主类别，并在主类别下创建子类别，形成2级类别结构。<br/>3.为商品分配一个合适的2级类别。<br/>4.检查商品列表和类别结构，确认商品已成功分配到相应的类别中。|
|S011|描述商品|卖家可以呈现商品的多张图片，并且可以通过富媒体描述商品|卖家已登录后台系统，并具备发布商品功能|商品应包含多张图片和富媒体格式的描述。|1.卖家在发布或编辑商品页面，上传多张商品图片。<br/>2.使用富媒体格式（如文字、图片、视频等）详细描述商品的特点和优势。<br/>3.保存并发布商品，检查商品详情页面。|
|S012|查看买家信息以及购买历史|卖家可以在后台系统查看到所有买家的注册信息以及购买历史|商家已登录到卖家后台，具备查看客户信息的权限。|商家应能够查看所有注册的客户信息以及他们的购买历史。|1.商家在卖家后台选择“客户管理”或类似功能。<br/>2.查看所有注册的客户信息，包括用户名、电话、交易地点等。<br/>3.选择某个客户，查看其购买历史。|
| H001|自动下架商品|当商品的库存为0时，系统自动下架该商品|商品已发布到平台，且库存数量已设置。|当库存数量为0时，商品应自动下架，且状态变为不可销售。|1.系统检查商品的库存数量，确保初始库存不为0。<br/>2.销售过程中，逐渐减少商品的库存数量。<br/>3.当库存数量为0时，检查商品状态是否自动变为不可销售，并从销售列表中移除。|
|C001|查看商品|买家可以通过浏览和搜索两种方式来查看商品|商品已发布到平台，且状态为可销售。|用户应能够通过浏览和搜索两种方式找到目标商品。|1.作为买家，在平台首页或商品分类页面浏览商品。<br/>2.使用搜索框输入关键词进行搜索。<br/>3.检查搜索结果和浏览页面，确认能够找到目标商品。|
| C002 | 购买商品 | 买家有购买意向时，填写用户信息包括姓名、电话、地址等信息并提交 | 买家有意向购买商品 | 用户信息提交成功 | 1.买家浏览商品并有购买意向。<br/>2.买家填写用户信息并提交。<br/>3.系统验证用户信息有效性。<br/>4.用户信息提交成功。 |
|C004|注册|买家可以自由注册平台|用户访问平台注册页面。|用户应能够成功注册账号，并登录使用。|1.访问平台注册页面。<br/>2.输入用户名、密码、电话和默认交易地点等信息。<br/>3.确认信息无误后，点击“注册”按钮。<br/>4.系统检验信息正确性，检查无误，跳转到登录页面。<br/>5.买家使用注册的用户名和密码登录账号。|
|C005|查看历史下单记录|买家登录自己的账号后，可以查看自己的历史下单记录|：用户已登录账号，且有历史下单记录。|用户应能够查看所有历史下单记录，并了解订单状态。|1.登录账号后，进入个人中心页面。<br/>2.选择“历史订单”或类似功能，查看历史下单记录。<br/>3.系统返回所有下单记录。<br/>4.买家检查订单列表，确认包含所有历史下单记录，并了解订单状态（如已支付、已发货、已完成等）。|

<h3 id="tf">2.4用例图<h3>

![用例图](https://gitee.com/zhishidiannaoka/hahashop/raw/master/2235020429-%E9%A2%9D%E5%A4%96%E6%88%90%E6%9E%9C%E7%89%A9/2-images/%E7%94%A8%E4%BE%8B%E5%9B%BE.png)

<h2 id="th">三、技术需求</h2>

<h3 id="tho">3.1数据库设计</h3>

 **1. 用户表（User）** 

| 名 | 含义| 类型 | 规范以及说明|
|---|---|---|---|
| id | 用户ID |INTEGER |主键，自动生成|
| username |用户名 |TEXT|唯一，不为空|
|password|密码|TEXT|加密存储，不为空|
|privilege|用户权限|INTEGER|不为空，1为卖家，2为买家|
|userPhone|电话|VARCHAR|大小为20|
|userAddress|交易地址|VARCHAR|大小为255|
|userRealName|买家真实姓名|VARCHAR|大小为100|

 **2. 商品表(Good)** 

| 名 | 含义| 类型 | 规范以及说明|
|---|---|---|---|
|goodId|商品ID|INTEGER|主键，自动生成|
|goodName|商品名称|TEXT|不为空|
|goodDesc|商品描述|TEXT|可以是文本、图片与视频；图片和视频存放链接|
|goodPrice|商品价格|REAL|不为空|
|goodImage|商品图片|TEXT|存放图片链接。当有多个图片时，多个链接之间用逗号分隔|
|buyerNum|购买数量|INTEGER||
|categoryId|类别ID|INTEGER|不为空，为类别（Category）表的外键|
|goodNum|商品数量|INTEGER|不为空|

 **3. 订单表(Orders)**  

| 名 | 含义| 类型 | 规范以及说明|
|---|---|---|---|
|orderId|订单ID|INTEGER|主键，自动生成|
|goodId|商品ID|INTEGER|不为空，商品（Good）表的外键|
|userId|用户ID|INTEGER|不为空，用户（User）表的外键|
|buyerName|买家名字|TEXT|不为空|
|buyerAddress|买家地址|TEXT|不为空|
|buyerPhone|买家电话|TEXT|不为空|
|buyerDesc|买家备注|TEXT||
|orderState|订单状态|INTEGER|不为空，0：进行中， 1：已完成， 2：已取消|
|buyerGoodsNum|买家购买数量|INTEGER|不为空|
|orderPrice|订单价格|REAL||

 **4. 历史商品表(History）** 

| 名 | 含义| 类型 | 规范以及说明|
|---|---|---|---|
|historyId|历史ID|INTEGER|主键，自动生成|
|goodId|商品ID|INTEGER|不为空，商品表（Good)的外键|
|goodName|商品名称|VARCHAR|大小为255|
|goodDesc|商品描述|TEXT||
|goodPrice|商品价格|REAL||
|goodImage|商品图片|TEXT|为商品表中商品图片的第一个链接|
|operationTime|上架时间|TEXT||

**5.类别表（Category）**

| 名 | 含义| 类型 | 规范以及说明|
|---|---|---|---|
|categoryId|类别ID|INTEGER|主键，自动生成|
|categoryName|类别名称|VARCHAR|大小为255，不为空|
|pid|父级id|INTEGER|类别是一级则为0，二级则为1|

**6.图片信息表（Storage）**

| 名 | 含义| 类型 | 规范以及说明|
|---|---|---|---|
|id |图片信息ID|INTEGER|主键，自动生成|
|key|图片唯一名称|TEXT|图片的唯一索引|
|name|图片名称|TEXT|
|type|图片类型|TEXT|例如：jpg,png等|
|size|图片大小|TEXT|
|url|图片链接|TEXT|


<h3 id="tht">3.2数据规范</h3>

- 商品名称：长度不超过255个字符，支持中英文及特殊字符。

- 商品描述：无长度限制，支持富媒体展示，如文字、图片和视频等。

- 商品图片：图片应上传至服务器并存储其URL链接，支持常见图片格式（JPEG, PNG等），图片大小不超过5MB。

- 商品价格：格式为数字，保留两位小数，支持正数表示价格。

- 商品库存：格式为数字，发布商品时，只能大于0 。

- 用户名：长度在5-20个字符之间，支持中英文及数字，唯一性校验。

- 用户密码：采用强密码策略（至少8位，包含大小写字母、数字和特殊字符），并且加密存储。

- 用户号码：是11位有效号码，同一个买家在购买不同的商品时填写的号码应该保持一致。

- 用户地址：包含包含省、市、区（县）、街道（乡镇）及具体的门牌号或小区名称、楼栋号、单元号等信息。避免使用模糊或产生歧义的词汇，如“附近”“旁边”等。

<h2 id="f">四、与基线版需求的差异汇总</h2>

<h3 id="fo">4.1卖家功能方面</h3>

| 功能名称 | 基线版 | A版 |
|---|---|---|
| 发布商品 | 1、每次只能发布**单个**商品，并且设有前提条件为当前无正在售卖的商品<br/> 2、只用上传单个图片，并且商品描述只支持文本| 1、每次能够发布**多个**商品，并且没有前提条件<br/>2、可以上传多个图片，并且支持富媒体描述<br/>3、发布商品时应该需管理商品类别 |
| 商品状态管理 |1、卖家需要手动选择意向购买人并进行线下交易<br/>2、卖家需要手动撤下商品| 1、卖家不用手动选择意向购买人来进行交易，买家提交购买意向后自动确认订单<br/>2、若线下交易成功，不用手动撤下；当商品库存为0时，自动下架商品 |
| 查看买家信息 | 只能查看意向购买人的订单信息 |1、可以查看所有买家的注册信息<br/>2、可以查看买家的历史购买信息 |

#### 相同处：

- 卖家登录后台系统功能、修改密码、查看历史商品信息。

<h3 id="ft">4.2买家功能方面</h3>

| 功能名称 | 基线版 | A版 |
|---|---|---|
| 注册平台 | 买家没有注册功能，只能提交商品的购买意向 | 买家可以自由注册平台 |
| 查看历史订单信息 | 无 | 买家可以查看历史订单信息 |
| 查看商品 | 买家只能浏览商品页面来查看上架商品 | 买家可以通过浏览和搜索两种方式来查看商品 |

#### 相同处：

- 买家购买商品功能未变。



















 






